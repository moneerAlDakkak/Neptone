{"version":3,"sources":["webpack:///./src/assets/my-ad.jpg","webpack:///./src/assets/female.png","webpack:///./src/assets/male.png","webpack:///./src/views/Home.vue?baed","webpack:///./src/views/Home.vue","webpack:///./src/views/Home.vue?ab8c"],"names":["module","exports","class","src","alt","href","target","thisUser","details","gender","chatSearching","readyToMatch","matchUser","appVocubulary","newChat","connected","peopleRConnected","tip1","name","ref","data","message","components","WPopup","computed","socket","this","$store","state","user","socketId","thePartner","partner","lang","pages","Home","watch","newPartner","document","getElementById","click","methods","decision","emit","roomId","room","isPartner","commit","showPopup","options","$refs","popup","show","confirmationResult","location","reload","beforeMount","console","log","connect","age","country","updatedProp","newValue","mounted","on","peopleConnected","user1","user2","unmounted","removeAllListeners","render","__scopeId"],"mappings":"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","file":"js/chunk-aa8e1d80.b324a7bf.js","sourcesContent":["module.exports = __webpack_public_path__ + \"img/my-ad.30a85167.jpg\";","module.exports = __webpack_public_path__ + \"img/female.060f9a2b.png\";","module.exports = __webpack_public_path__ + \"img/male.ba3e7bdc.png\";","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Home.vue?vue&type=style&index=0&id=1304560b&lang=scss&scoped=true\"","<template>\n  <div class=\"page home-page\">\n    <div class=\"home-layout\">\n      <div class=\"image-ripples\">\n        <img\n          src=\"../assets/female.png\"\n          alt=\"female\"\n          v-if=\"thisUser.details.gender === 'female'\"\n        />\n        <img src=\"../assets/male.png\" alt=\"male\" v-else />\n        <div v-if=\"chatSearching\"></div>\n      </div>\n      <button v-if=\"!chatSearching && readyToMatch\" @click=\"matchUser(true)\">\n        <span>{{ appVocubulary.newChat }}</span>\n        <!-- <span>\n          <i class=\"fas fa-circle-notch fa-spin\"></i>\n          {{ appVocubulary.connecting }}</span\n        > -->\n      </button>\n      <div class=\"ad-space\" v-if=\"!chatSearching\">\n        <a href=\"https://www.facebook.com/Moneerprofacc/\" target=\"_blank\">\n          <img src=\"../assets/my-ad.jpg\" alt=\"ad\" />\n        </a>\n      </div>\n      <button\n        class=\"stop-searching\"\n        @click=\"matchUser(false)\"\n        v-if=\"chatSearching\"\n      >\n        <i class=\"fas fa-times fa-2x\"></i>\n      </button>\n      <div v-if=\"chatSearching\" class=\"hints\">\n        <i class=\"fas fa-circle\"></i>\n        <span>{{ connected }} {{ appVocubulary.peopleRConnected }}</span>\n        <br />\n        <span class=\"tip\">{{ appVocubulary.tip1 }}</span>\n      </div>\n    </div>\n    <transition name=\"opacity\">\n      <w-popup ref=\"popup\" />\n    </transition>\n  </div>\n</template>\n\n<script>\nimport WPopup from \"../components/WPopup.vue\";\n\nexport default {\n  name: \"Home\",\n  data() {\n    return {\n      chatSearching: false,\n      message: \"\",\n    };\n  },\n  components: { WPopup },\n  computed: {\n    socket() {\n      return this.$store.state.socket;\n    },\n    thisUser() {\n      return this.$store.state.user;\n    },\n    readyToMatch() {\n      return this.thisUser.socketId;\n    },\n    thePartner() {\n      return this.$store.state.partner;\n    },\n    connected() {\n      return this.$store.state.connected;\n    },\n    lang() {\n      return this.$store.state.lang;\n    },\n    appVocubulary() {\n      return this.$store.state.appVocubulary[this.lang].pages.Home;\n    },\n  },\n  watch: {\n    thePartner(newPartner) {\n      if (newPartner.socketId) {\n        document.getElementById(\"chat-link\").click();\n      }\n    },\n  },\n  methods: {\n    matchUser(decision) {\n      if (this.readyToMatch) {\n        this.chatSearching = decision;\n        if (decision) {\n          // if the user is searching emit the matchThisOne event to server with this user data\n          this.socket.emit(\"matchThisOne\", this.thisUser);\n        } else {\n          this.socket.emit(\"leaveRoom\", {\n            roomId: this.thisUser.room,\n            isPartner: false,\n          });\n          this.$store.commit(\"updatePartner\", { name: \"\" });\n        }\n      }\n      // set the searching state and connect to socket io\n    },\n    async showPopup(options) {\n      const confirmationResult = await this.$refs.popup.show(options);\n      if (confirmationResult) {\n        location.reload();\n      }\n    },\n  },\n  beforeMount() {\n    if (!this.thisUser.socketId && this.thisUser.name) {\n      console.log(\"connect\");\n      this.socket.connect();\n    }\n    if (this.thisUser.name === \"\") {\n      document.getElementById(\"login-link\").click();\n    }\n    // reset partner when you are in home screen\n    this.$store.commit(\"updatePartner\", {\n      name: \"\",\n      age: 0,\n      details: { gender: \"\", country: \"\" },\n    });\n\n    this.$store.commit(\"updateUserWith\", { updatedProp: \"room\", newValue: \"\" });\n    this.$store.commit(\"updateUserWith\", {\n      updatedProp: \"room_name\",\n      newValue: \"\",\n    });\n  },\n  mounted() {\n    // Socket.io Home Handelers :\n\n    // 1) get the number of connected users :\n    this.socket.on(\"sendConnected\", (peopleConnected) => {\n      this.$store.commit(\"setConnectedUsers\", peopleConnected);\n    });\n\n    // 2) set this user's id when the socket connects to server :\n    this.socket.on(\"updateId\", (socketId) => {\n      this.$store.commit(\"updateUserWith\", {\n        updatedProp: \"socketId\",\n        newValue: socketId,\n      });\n    });\n\n    // 3) set this user's room when it's set from the server :\n    this.socket.on(\"updateRoom\", (roomId) => {\n      this.$store.commit(\"updateUserWith\", {\n        updatedProp: \"room\",\n        newValue: roomId,\n      });\n    });\n\n    // 4) set the new partner when the user matches :\n    this.socket.on(\"updatePartner\", ({ user1, user2 }) => {\n      if (user1.socketId !== this.thisUser.socketId) {\n        [user1, user2] = [user2, user1];\n      }\n      this.$store.commit(\"updatePartner\", user2);\n    });\n  },\n  unmounted() {\n    // necessary proccess so the one event doesn't register a listener everytime the home component is mounted\n    this.socket.removeAllListeners(\"sendConnected\");\n    this.socket.removeAllListeners(\"updateId\");\n    this.socket.removeAllListeners(\"updateRoom\");\n    this.socket.removeAllListeners(\"updatePartner\");\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.home-page {\n  .home-layout {\n    height: calc(100%);\n    display: grid;\n    padding: 10px;\n    justify-items: center;\n    align-items: center;\n\n    .hints {\n      max-width: 80%;\n      text-align: center;\n      span,\n      i {\n        color: green;\n        margin: 0 10px;\n        font-size: 0.96em;\n      }\n      i {\n        transform: scale(0.6);\n      }\n      .tip {\n        display: inline-block;\n        color: var(--accent);\n        font-size: 0.9em;\n        margin: 10px 0;\n      }\n    }\n\n    .ad-space {\n      position: relative;\n      align-self: end;\n      width: 100%;\n      height: 120px;\n      border: 2px dashed var(--accent);\n      background-color: rgba(103, 55, 216, 0.16);\n      color: var(--accent);\n      font-weight: bold;\n      justify-content: center;\n      align-items: center;\n      display: flex;\n      padding: 2px;\n      max-width: 400px;\n      a {\n        height: 100%;\n        width: 100%;\n        overflow: hidden;\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        img {\n          width: 100%;\n        }\n      }\n      &:before {\n        content: \"Ad space\";\n        position: absolute;\n        top: 0;\n        transform: translateY(-100%);\n        left: 10px;\n        font-weight: bold;\n        font-size: 0.7em;\n        background: var(--accent);\n        color: white;\n        padding: 6px;\n        border-top-right-radius: 10px;\n        border-top-left-radius: 10px;\n      }\n    }\n\n    button {\n      width: 60%;\n      max-width: 300px;\n      padding: 20px;\n      border-radius: 40px;\n      background-color: var(--accent);\n      color: white;\n    }\n\n    .stop-searching {\n      width: 80px;\n      background-color: rgba(0, 0, 0, 0.4);\n      color: white;\n    }\n\n    .image-ripples {\n      position: relative;\n      width: 60%;\n      margin: 0 15%;\n      max-width: 240px;\n\n      img {\n        width: 100%;\n        z-index: 1;\n      }\n\n      div {\n        z-index: -1;\n        position: absolute;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        border-radius: 50%;\n        background-color: var(--accent);\n        opacity: 0.7;\n        animation: ripples 0.8s infinite linear;\n      }\n    }\n  }\n}\n\n@keyframes ripples {\n  0% {\n    opacity: 0.7;\n  }\n  100% {\n    transform: scale(1.4);\n    opacity: 0;\n  }\n}\n</style>\n","import { render } from \"./Home.vue?vue&type=template&id=1304560b&scoped=true\"\nimport script from \"./Home.vue?vue&type=script&lang=js\"\nexport * from \"./Home.vue?vue&type=script&lang=js\"\n\nimport \"./Home.vue?vue&type=style&index=0&id=1304560b&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-1304560b\"\n\nexport default script"],"sourceRoot":""}